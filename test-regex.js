const fs = require('fs');

const testContent = `　　第129章：侠客与拳师
　　＊＊＊　　＊＊＊　　＊＊＊
　　第129章：侠客与拳师＊＊　　＊＊＊
　　第129章：侠客与拳师
　　当自动门关上的一刻，松岛宏就意识到了什么，开口道："我听说在古老的时代，哺乳动物的幼儿在取食母乳的时候，绝对不会让母亲感到疼痛，就好像侠客绝对不会将剑指向民众一样。您强横内力随身，今天却来找我一个普通武师的麻烦。这难道不是不合理的吗？"

　　第130章：隐形的根据地
　　＊＊＊　　＊＊＊　　＊＊＊
　　第130章：隐形的根据地
"说实话，我还是很疑惑这个问题的。"向山翘起二郎腿`;

const rule = "^[ 　\\t]{0,4}(?:序章|楔子|正文(?!完|结)|终章|后记|尾声|番外|第\\s{0,4}[\\d〇零一二两三四五六七八九十百千万壹贰叁肆伍陆柒捌玖拾佰仟]+?\\s{0,4}(?:章|节(?!课)|卷|集(?![合和])|部(?![分赛游])|篇(?!张))).{0,30}$";

const pattern = new RegExp(rule, 'gm');
let m;
let count = 0;

pattern.lastIndex = 0;
while ((m = pattern.exec(testContent)) !== null) {
    console.log(`匹配 ${++count}: "${m[0]}"`);
    console.log(`  位置: ${m.index}`);
    console.log(`  捕获组:`, m.slice(1));
}

console.log(`\n总计匹配: ${count} 处`);
